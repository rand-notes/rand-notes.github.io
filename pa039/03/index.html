<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content><meta name=description content="Optimizing Compiler Translation to the Intermediate language Optimization intra-procedural analysis cycle optimization global optimization (inter-process optimization) Code generation use of all superscalar units Intermediate Language Quadruple (generally n-tuple) Memory: accessible through temporary variables Branches: condition calculated separately Branches: jumps to absolute addresses Basic blocks Program is represented as a flow graph Block – a code segment without branches/jumps One entry and one exit point Block as a DAG (Directed Acyclic Graph) Optimization within blocks Removal of repeated (sub)expressions Removal of redundant variables Additional concepts Variables"><meta name=keywords content><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://rand-notes.github.io/pa039/03/><title>notes 03 :: idk</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=/main.7209ab6422eb371a6b685a56274cc88eff3db604665c3bdb698389c0585d4211.css><meta itemprop=name content="notes 03"><meta itemprop=description content="Optimizing Compiler Translation to the Intermediate language Optimization intra-procedural analysis cycle optimization global optimization (inter-process optimization) Code generation use of all superscalar units Intermediate Language Quadruple (generally n-tuple) Memory: accessible through temporary variables Branches: condition calculated separately Branches: jumps to absolute addresses Basic blocks Program is represented as a flow graph Block – a code segment without branches/jumps One entry and one exit point Block as a DAG (Directed Acyclic Graph) Optimization within blocks Removal of repeated (sub)expressions Removal of redundant variables Additional concepts Variables"><meta itemprop=datePublished content="2022-05-05T00:00:00+00:00"><meta itemprop=dateModified content="2022-05-05T00:00:00+00:00"><meta itemprop=wordCount content="509"><meta itemprop=image content="https://rand-notes.github.io"><meta itemprop=keywords content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rand-notes.github.io"><meta name=twitter:title content="notes 03"><meta name=twitter:description content="Optimizing Compiler Translation to the Intermediate language Optimization intra-procedural analysis cycle optimization global optimization (inter-process optimization) Code generation use of all superscalar units Intermediate Language Quadruple (generally n-tuple) Memory: accessible through temporary variables Branches: condition calculated separately Branches: jumps to absolute addresses Basic blocks Program is represented as a flow graph Block – a code segment without branches/jumps One entry and one exit point Block as a DAG (Directed Acyclic Graph) Optimization within blocks Removal of repeated (sub)expressions Removal of redundant variables Additional concepts Variables"><meta property="og:title" content="notes 03"><meta property="og:description" content="Optimizing Compiler Translation to the Intermediate language Optimization intra-procedural analysis cycle optimization global optimization (inter-process optimization) Code generation use of all superscalar units Intermediate Language Quadruple (generally n-tuple) Memory: accessible through temporary variables Branches: condition calculated separately Branches: jumps to absolute addresses Basic blocks Program is represented as a flow graph Block – a code segment without branches/jumps One entry and one exit point Block as a DAG (Directed Acyclic Graph) Optimization within blocks Removal of repeated (sub)expressions Removal of redundant variables Additional concepts Variables"><meta property="og:type" content="article"><meta property="og:url" content="https://rand-notes.github.io/pa039/03/"><meta property="og:image" content="https://rand-notes.github.io"><meta property="article:section" content="fi"><meta property="article:published_time" content="2022-05-05T00:00:00+00:00"><meta property="article:modified_time" content="2022-05-05T00:00:00+00:00"><meta property="og:site_name" content="idk"><meta property="article:published_time" content="2022-05-05 00:00:00 +0000 UTC"></head><body><div class=container><header class=header><span class=header__inner><a href=/ style=text-decoration:none><div class=logo>title</div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=/posts>notes</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class="theme-toggle not-selectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info></p></div><article><h2 class=post-title><a href=https://rand-notes.github.io/pa039/03/>notes 03</a></h2><div class=post-content><h1 id=optimizing-compiler>Optimizing Compiler</h1><ul><li>Translation to the Intermediate language</li><li>Optimization</li><li>intra-procedural analysis</li><li>cycle optimization</li><li>global optimization (inter-process optimization)</li><li>Code generation</li><li>use of all superscalar units</li></ul><h1 id=intermediate-language>Intermediate Language</h1><ul><li>Quadruple (generally n-tuple)</li><li>Memory: accessible through temporary variables</li><li>Branches: condition calculated separately</li><li>Branches: jumps to absolute addresses</li></ul><h1 id=basic-blocks>Basic blocks</h1><ul><li>Program is represented as a flow graph</li><li>Block – a code segment without branches/jumps</li><li>One entry and one exit point</li><li>Block as a DAG (Directed Acyclic Graph)</li><li>Optimization within blocks</li><li>Removal of repeated (sub)expressions</li><li>Removal of redundant variables</li></ul><h1 id=additional-concepts>Additional concepts</h1><p>Variables</p><ul><li>definition and place of use
Cycles
Target code generation</li></ul><h1 id=classical-optimizations>Classical optimizations</h1><p>Copy propagation:<br>X = Y
Z = X + 1 ==> Z = Y + 1</p><p>Constants processing</p><ul><li>constants propagation</li><li>constants folding
Dead-code elimination</li><li>inaccessible code</li><li>saving cache capacity for instructions</li><li>Strength reduction:</li><li>K**2 ==> K*K</li><li>Variable renaming</li><li>Common subexpressions elimination: important especially for evaluation of array indices</li><li>Move of invariant code from cycles</li><li>Simplification of induction variables (expressions with them)</li><li>Register allocation</li></ul><h1 id=garbage-elimination>Garbage elimination</h1><ul><li>Procedures, macros: Inlining</li><li>Conditional expressions:</li><li>Comples expressions reorganization</li><li>Excessive/redundant tests (if vs case)</li><li>Conditional expressions within cycles</li><li>Cycle (induction variable) independent</li><li>Cycle (induction variable) dependent</li><li>Branches (jumps)</li><li>Type conversion</li><li>Manual optimization</li><li>Common subexpressions</li><li>code move</li><li>array processing</li></ul><h1 id=cycle-optimization>Cycle optimization</h1><ul><li>Overhead reduction</li><li>Better access to memory (efficient use of caches)</li><li>Parallelism increase</li></ul><h1 id=raw-war-and-waw-dependencies>RAW, WAR and WAW dependencies</h1><ul><li>Read after Read (RAR): Benign” (in fact no) dependency</li><li>Read after Write (RAW): “True” dependency, Most problematic, order cannot be changed</li><li>Write after Read (WAR): “Antidependency”, Can be dealt with by renaming</li><li>Write after Write (WAW): “Output” dependency, Order cannot change unless checked for other dependencies</li></ul><h1 id=data-dependencies>Data dependencies</h1><ul><li>Flow dependencies (backward dependencies)</li><li>Anti-Dependencies (Variable renaming as a default solution)</li><li>Output Dependencies: Several values of a variable are computed during the cycle execution, but only the “last” is to be written</li><li>Not always easy to recognize, which value is “the last”</li></ul><h1 id=loop-unrolling>Loop unrolling</h1><ul><li>Cycle body copies several times within the cycle</li><li>Major purpose:</li><li>Overhead reduction: Reduction of number of iterations (=number of branches)</li><li>Parallelism increase (also within a single superscalar processor): Software pipelining</li><li>Pre- a postconditioning loops: Actual number of iterations adaptation</li></ul><p>Unsuitable loops:</p><ul><li>Small number of iterations −→ full loop unrolling</li><li>“Fat” (=too large)) cycles: already include sufficient number of opportunities for parallelization</li><li>Loops with procedure calls: see also the procedure inlining</li><li>Loops with conditional expressions: more important for older processors</li><li>“Recursive” loops: with internal dependencies (cross iterations)</li></ul><h1 id=loop-unrolling-problems>Loop unrolling problems</h1><ul><li>Unrolling with a bad number of iterations</li><li>Register clogging</li><li>Misses of instruction cache (too long cycle)</li><li>Hardware problems</li><li>esp. on multiprocessors with shared memory (cache coherency, bus overload, &mldr;)</li><li>Special cases: external loops unrolling, loops combination</li></ul><h1 id=loops-combination>Loops combination</h1><ul><li>Repeated use of data (cache efficiency)</li><li>Large loop body</li><li>Compiler can do the combination if there is no code between loops</li></ul><h1 id=memory-access-optimization>Memory access optimization</h1><ul><li>Optimal: smallest step (cache optimization</li><li>Work with arrays – C vs. Fortran</li></ul><h1 id=cache-optimization--blocking>Cache optimization – Blocking</h1><ul><li>A general technique to split loops working with arrays to loops that work on a block of arrays</li></ul><h1 id=memory-access-optimization-1>Memory Access Optimization</h1><ul><li>Indirect addressing</li><li>Use of pointers</li><li>Insufficient memory capacity</li><li>&ldquo;Manual” processing</li><li>Virtual memory</li></ul></div></article><hr><div class=post-info></div></main></div><footer class=footer></footer><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script></div><script type=text/javascript src=/bundle.min.c7e937cd76fb1097985d5c8ae541eb44da0ddf0ecfc093bb5e2fe6be756ac425b77825c1c7d6f19ac4c0c4d18ae466ea8bf31c3f646c557dedb72d8a31bbd7e2.js integrity="sha512-x+k3zXb7EJeYXVyK5UHrRNoN3w7PwJO7Xi/mvnVqxCW3eCXBx9bxmsTAxNGK5Gbqi/McP2RsVX3tty2KMbvX4g=="></script></body></html>